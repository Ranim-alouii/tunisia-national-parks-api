{% extends "base.html" %}

{% block title %}Sentiers de Randonnée - Parcs Nationaux de Tunisie{% endblock %}

{% block content %}
<section class="section">
    <div class="container">
        <div class="section-header">
            <h1 class="section-title">Sentiers de Randonnée</h1>
            <p class="section-subtitle">Explorez les sentiers de tous les parcs</p>
        </div>

        <div id="trailsContainer">
            <p style="text-align: center;">Chargement des sentiers...</p>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
async function loadTrails() {
    try {
        const response = await fetch('/api/parks');
        const parks = await response.json();

        const container = document.getElementById('trailsContainer');
        container.innerHTML = '';

        for (const park of parks.slice(0, 5)) { // Limit to first 5 parks for demo
            const trailsResponse = await fetch(`/api/parks/${park.id}/trails`);
            const trails = await trailsResponse.json();

            if (trails.length > 0) {
                const parkSection = document.createElement('div');
                parkSection.innerHTML = `
                    <h3>${park.name}</h3>
                    <div class="grid grid-2">
                        ${trails.map(trail => `
                            <div class="card">
                                <div class="card-content">
                                    <h4>${trail.name}</h4>
                                    <p>${trail.description}</p>
                                    <div style="display: flex; gap: 1rem; font-size: 0.875rem;">
                                        <span><i class="fas fa-route"></i> ${trail.length_km} km</span>
                                        <span><i class="fas fa-clock"></i> ${trail.duration_hours}h</span>
                                        <span class="difficulty-badge difficulty-${trail.difficulty}">
                                            ${trail.difficulty}
                                        </span>
                                    </div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                `;
                container.appendChild(parkSection);
            }
        }
    } catch (error) {
        console.error('Error loading trails:', error);
    }
}

document.addEventListener('DOMContentLoaded', loadTrails);
</script>
{% endblock %}
